(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{54:function(e,t,n){e.exports=n(83)},59:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return ye})),n.d(t,"store",(function(){return we}));var a=n(0),r=n.n(a),o=n(27),i=n.n(o),u=(n(59),n(85)),c=n(1),s=n(2),l=n(14),d=[{name:"freeText",display:"Free Text"},{name:"multipleChoice",display:"Multiple Choice"}],m=n(84);function b(e){return{type:"ANSWER_FREE_TEXT_QUESTION",payload:e}}function f(e){return{type:"ANSWER_MULTIPLE_CHOICE_QUESTION",payload:e}}function E(e){return{type:"NEXT_QUESTION",payload:e}}function p(e){return{type:"SET_CURRENT_QUESTION_ID",payload:e}}function h(e){var t=e.register,n=e.handleSubmit,o=e.question,i=e.getValues,u=e.setCurrentAnswerAction,s=Object(c.b)(),l=Object(c.c)((function(e){return e.examTable})),d=Object(c.c)((function(e){return e.examState})).currentExamId;Object(a.useEffect)((function(){u((function(){return function(){var e=i({nest:!0}).answerText;return b({questionId:f,answer:e})}}))}),[o,i]);var f=o.questionId;return r.a.createElement("form",{onSubmit:n((function(e){var t=e.answerText;s(b({questionId:f,answer:t})),s(E({currentExam:l.byId[d]}))}))},r.a.createElement(m.o,{rows:10,columns:20,onPaste:function(e){return e.preventDefault(),!1},onCopy:function(e){return e.preventDefault(),!1},name:"answerText",defaultValue:o.storedAnswer,ref:t}),r.a.createElement(m.b,{type:"submit"},"Save and Next Question"))}var T=n(10),I=n(86);function v(e){var t=e.register,n=e.handleSubmit,o=e.question,i=e.getValues,u=e.setCurrentAnswerAction,l=Object(c.b)(),d=Object(a.useState)({possibleAnswers:[]}),b=Object(s.a)(d,2),p=b[0],h=b[1],v=Object(c.c)((function(e){return e.questionBodyMultipleChoiceTable})),g=Object(c.c)((function(e){return e.examTable})),y=Object(c.c)((function(e){return e.examState})),w=y.currentExamId,O=(y.currentQuestionId,function(e){e.multipleChoice;var t=[];return p.possibleAnswers.forEach((function(n,a){e.multipleChoice[a]&&t.push(n)})),t});Object(a.useEffect)((function(){console.log(v),console.log(o),u((function(){return function(){var e=O(i({nest:!0}));return f({questionId:o.questionId,selectedAnswers:e})}})),h((function(e){return Object(T.a)({},e,{possibleAnswers:v.byId[o.questionId].possibleAnswers})}))}),[o]);return r.a.createElement("form",{onSubmit:n((function(e){var t=O(e);l(f({questionId:o.questionId,selectedAnswers:t})),l({type:"SET_ANSWER_END_TIME",payload:{questionId:o.questionId}}),l(E({currentExam:g.byId[w]}))}))},p.possibleAnswers.map((function(e,n){return r.a.createElement("div",{key:Object(I.a)()},r.a.createElement(m.j,null,r.a.createElement(m.d,{defaultChecked:!1,name:"".concat("multipleChoice","[").concat(n,"]"),ref:t}),e))})),r.a.createElement(m.b,{type:"submit"},"Save and Next Question"))}function g(e){var t=e.questionId,n=e.currentExam,o=e.answerQuestionAction,i=(Object(u.e)(),Object(c.b)()),l=Object(c.c)((function(e){return e.answerTable.byId[t]})),d=Object(c.c)((function(e){return e.questionTable.byId[t]})),b=l.timeStart,f=d.timeLimitMs,E=Object(a.useState)((b?Math.round(f-(Date.now()-b)):f)/1e3),p=Object(s.a)(E,2),h=p[0],T=p[1];return Object(a.useEffect)((function(){T(f/1e3);var e=setInterval((function(){var n=Date.now(),a=we.getState().answerTable.byId[t].timeStart,r=Math.round((f-(n-a))/1e3);r>-1?T(r):(console.log(t),i(o()),clearInterval(e))}),1e3);return function(){clearInterval(e)}}),[d.questionId,n,i,f,t,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.h,{as:"h3"},h))}function y(e){var t=e.question,n=Object(a.useState)((function(){})),o=Object(s.a)(n,2),i=o[0],u=o[1],d=t.questionId,b=t.questionType,f=t.title,E=t.text,p=Object(c.b)(),T=Object(c.c)((function(e){return e.examState})).currentExamId,I=Object(c.c)((function(e){return e.examTable.byId[T]})),y=Object(l.b)(),w=y.register,O=y.handleSubmit,x=y.reset,S=y.getValues;Object(a.useEffect)((function(){p({type:"SET_ANSWER_START_TIME",payload:{questionId:d}}),x()}),[d,p,x]);return r.a.createElement("div",null,r.a.createElement(m.h,{as:"h2"},f),r.a.createElement("p",null,E),function(){switch(b){case"freeText":return r.a.createElement(h,{register:w,handleSubmit:O,question:t,getValues:S,setCurrentAnswerAction:u});case"multipleChoice":return r.a.createElement(v,{register:w,handleSubmit:O,question:t,getValues:S,setCurrentAnswerAction:u});default:return r.a.createElement("div",null,"Something went wrong")}}(),r.a.createElement(g,{questionId:d,currentExam:I,answerQuestionAction:i}))}function w(e){var t=e.sidePanel,n=void 0===t?void 0:t,o=e.mainContent,i=void 0===o?void 0:o,u=e.header,c=void 0===u?void 0:u,s=n?[1,"2fr 3fr","2fr 3fr"]:[1];return r.a.createElement(m.e,{variant:"masterContainer"},c&&r.a.createElement(m.e,null,c),r.a.createElement(m.g,{columns:s,gap:3},n&&r.a.createElement(m.c,null,n),i&&r.a.createElement(m.c,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},i))))}function O(){var e,t=Object(c.c)((function(e){return e.examTable})),n=Object(c.c)((function(e){return e.examState})),a=n.currentExamId,o=n.currentQuestionIndex,i=null===t||void 0===t||null===(e=t.byId[a])||void 0===e?void 0:e.questionsById;return r.a.createElement(m.f,{sx:{alignItems:"center",justifyContent:"center",background:"primary",margin:"1rem",flexDirection:"column"}},r.a.createElement(m.h,{as:"h1",sx:{marginBottom:"2rem"}},t.byId[a].name),r.a.createElement(m.k,{max:i.length,value:o+1}))}var x=n(51),S=n(52),j=n.n(S),_={REACT_APP_API_URL:"http://localhost:9000/api"},A="GET",q="POST",C="PATCH",k="PUT",N="DELETE",Q=function(){return localStorage.getItem("authToken")||sessionStorage.getItem("authToken")},R=new function e(){var t=this;Object(x.a)(this,e),this.service=void 0,this.setAuthToken=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.service.defaults.headers.common.Authorization=e?"Token ".concat(e):"",n?localStorage.setItem("authToken",e):sessionStorage.setItem("authToken",e)},this.removeAuthToken=function(){delete t.service.defaults.headers.common.Authorization,localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken")},this.unauthorizedHandler=function(){t.removeAuthToken(),"/"!==window.location.pathname&&ye.push("/login/")},this.handleRequest=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Q();return t.service.request({url:"".concat(_.REACT_APP_API_URL).concat(n),method:e,data:a,params:Object(T.a)({},r,{master:"a",ts:o?Date.now():null}),headers:{Authorization:i?"Bearer ".concat(i):void 0}}).catch(t.handleError)},this.handleError=function(e){if(console.error(e),e.response){switch(e.response.status){case 401:t.unauthorizedHandler()}return Promise.reject(e)}return Promise.reject(e)},this.get=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.handleRequest(A,e,{},n,a)},this.patch=function(e,n){return t.handleRequest(C,e,n)},this.put=function(e,n){return t.handleRequest(k,e,n)},this.post=function(e,n){return t.handleRequest(q,e,n)},this.delete=function(e,n){return t.handleRequest(N,e,n)},this.service=j.a.create({headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}),localStorage.getItem("authToken")?this.setAuthToken(localStorage.getItem("authToken"),!0):sessionStorage.getItem("authToken")&&this.setAuthToken(sessionStorage.getItem("authToken"))},U={USER:"/users/",USER_ME:"/users/me/",AUTH:"/auth/",QUESTION:"/questions/",ANSWER:"/answers/",EXAM:"/exams/",FREE_TEXT_QUESTION:"/free_text_questions/",FREE_TEXT_ANSWER:"/free_text_answers/",MULTIPLE_CHOICE_QUESTION:"/multiple_choice_questions/",MULTIPLE_CHOICE_ANSWER:"/multiple_choice_answers/"},B=r.a.createContext({user:{_id:null,role:null},loadUser:function(){},wipeUser:function(){},setUser:function(e){}});function L(e){e.children;var t=Object(a.useState)({_id:null,role:null}),n=Object(s.a)(t,2),r=n[0],o=n[1];Object(a.useEffect)((function(){i()}));var i=function(){var e=Q();return!r._id&&e?R.get(U.USER_ME,e).then((function(e){var t=e.data;console.log("data is",t),o(t)})).catch((function(){return!1})):new Promise((function(e){return e()}))}}var M=r.a.createContext({loading:!0,loadAllUsers:function(){},allUsers:{rows:[]},allQuestions:{rows:[]}});function P(e){e.children;var t=Object(a.useContext)(B).user,n=Object(a.useState)(!0),r=Object(s.a)(n,2),o=(r[0],r[1]),i=Object(a.useState)({rows:[]}),u=Object(s.a)(i,2),l=(u[0],u[1]),d=Object(a.useState)({rows:[]}),m=Object(s.a)(d,2),b=m[0],f=m[1],E=Object(a.useState)({rows:[]}),p=Object(s.a)(E,2),h=p[0],T=p[1],v=Object(a.useState)({rows:[]}),g=Object(s.a)(v,2),y=g[0],w=g[1],O=Object(a.useState)({rows:[]}),x=Object(s.a)(O,2),S=x[0],j=x[1],_=Object(c.b)();Object(a.useEffect)((function(){o(!0),A(),q(),C(),k(),N(),o(!1)}),[t]),Object(a.useEffect)((function(){var e,t,n,a={byId:{},allIds:[]};console.log(h);var r=null===h||void 0===h||null===(e=h.rows[0])||void 0===e||null===(t=e.content)||void 0===t?void 0:t.questionsById[0],o=null===h||void 0===h||null===(n=h.rows[0])||void 0===n?void 0:n._id;h.rows.map((function(e){var t=e._id,n=e.content;a.byId[t]={examId:t,name:n.name,questionsById:n.questionsById},a.allIds.push(t)})),_({type:"SET_EXAM_TABLE",payload:{newTable:a}}),_(function(e){return{type:"SET_EXAM_STATE",payload:e}}({newTable:{currentExamId:o,currentQuestionIndex:0,currentQuestionId:r,currentTime:null,timerIsActive:!0,examFinished:!1}}))}),[h]),Object(a.useEffect)((function(){var e={byId:{},allIds:[]},t={byId:{},allIds:[]},n={byId:{},allIds:[]},a={byId:{},allIds:[]};b.rows.map((function(r){var o=r._id,i=r.content;e.byId[o]={questionId:o,questionType:i.questionType,text:i.text,timeLimitMs:i.timeLimitMs,title:i.title},e.allIds.push(o);var u=Object(I.a)();t.byId[o]={questionId:o,answerId:u,timeStart:null,timeEnd:null,timeExpired:!1},t.allIds.push(o),"freeText"===i.questionType?(n.byId[o]={questionId:o,answerId:u,answerText:""},n.allIds.push(u)):"multipleChoice"===i.questionType&&(a.byId[o]={questionId:o,answerId:u,selectedAnswers:""},a.allIds.push(u))})),_({type:"SET_QUESTION_TABLE",payload:{newTable:e}}),_(function(e){return{type:"SET_ANSWER_TABLE",payload:e}}({newTable:t})),_(function(e){return{type:"SET_ANSWER_BODY_FREE_TEXT_TABLE",payload:e}}({newTable:n})),_(function(e){return{type:"SET_ANSWER_BODY_MULTIPLE_CHOICE_TABLE",payload:e}}({newTable:a}))}),[b]),Object(a.useEffect)((function(){var e={byId:{},allIds:[]};y.rows.map((function(t){t._id;var n=t.content;e.byId[n.questionId]={questionId:n.questionId},e.allIds.push(n.questionId)})),_({type:"SET_QUESTION_BODY_FREE_TEXT_TABLE",payload:{newTable:e}})}),[y]),Object(a.useEffect)((function(){var e={byId:{},allIds:[]};S.rows.map((function(t){t._id;var n=t.content;console.log(n),e.byId[n.questionId]={questionId:n.questionIds,possibleAnswers:n.possibleAnswers},e.allIds.push(n.questionId)})),console.log("newTable",e),_({type:"SET_QUESTION_BODY_MULTIPLE_CHOICE_TABLE",payload:{newTable:e}})}),[S]);var A=function(){return R.get(U.USER).then((function(e){var t=e.data;l(t)}))},q=function(){return R.get(U.QUESTION).then((function(e){var t=e.data;f(t)}))},C=function(){return R.get(U.EXAM).then((function(e){var t=e.data;T(t)})).catch("fetch Exams failed")},k=function(){return R.get(U.FREE_TEXT_QUESTION).then((function(e){var t=e.data;w(t)}))},N=function(){return R.get(U.MULTIPLE_CHOICE_QUESTION).then((function(e){var t=e.data;j(t)}))}}var F=function(){var e=Object(a.useContext)(M).loading,t=Object(c.c)((function(e){return e.questionTable})),n=Object(c.c)((function(e){return e.examState})),o=n.currentQuestionId;return n.examFinished,r.a.createElement(r.a.Fragment,null,e?r.a.createElement(m.m,null):r.a.createElement(w,{mainContent:r.a.createElement(y,{question:t.byId[o]}),header:r.a.createElement(O,null)}))},D=n(36),W=function(){var e=Object(c.c)((function(e){return e.questionTable})),t=Object(c.b)();return r.a.createElement(D.b.table,null,e.allIds.map((function(n,a){var o=a%2===0?"odd":"even";return r.a.createElement(D.b.tr,{variant:o},r.a.createElement(D.b.td,null,e.byId[n].title),r.a.createElement(D.b.td,null,e.byId[n].text),r.a.createElement(D.b.td,null,r.a.createElement(m.b,{variant:"tiny",onClick:function(){t(p({newQuestionId:n,newQuestionIndex:null}))}},"Show")))})),r.a.createElement(m.b,{onClick:function(){return t(p({newQuestionId:null,newQuestionIndex:null}))}},"New question"))},X=function(){var e=Object(c.c)((function(e){return e.examTable}));return r.a.createElement(D.b.table,null,e.allIds.map((function(t,n){var a=n%2===0?"odd":"even";return r.a.createElement(D.b.tr,{variant:a},r.a.createElement(D.b.td,null,e.byId[t].name),r.a.createElement(D.b.td,null,"Date"),r.a.createElement(D.b.td,null,r.a.createElement(m.b,{variant:"tiny",onClick:function(){console.log("dispatch set current question")}},"Edit")))})),r.a.createElement(m.b,{onclick:function(){return console.log("Dispatch set currentQuestion Null")}},"New Exam"))};function H(e){var t=e.tabNames,n=e.tabComponents,o=Object(a.useState)(0),i=Object(s.a)(o,2),u=i[0],c=i[1];return r.a.createElement("div",null,r.a.createElement(m.g,{columns:[1,2,2],gap:3},t.map((function(e,t){return r.a.createElement(m.b,{onClick:function(){c(t)},variant:t===u?"activeTab":"mutedTab"},e.display)}))),r.a.createElement(m.c,{variant:"blueBorder"},n[u]))}function V(){return r.a.createElement("div",null,r.a.createElement(H,{tabNames:[{name:"question",display:"Questions"},{display:"Exams",name:"question"}],tabComponents:[r.a.createElement(W,null),r.a.createElement(X,null)]}))}function z(e){var t=e.makeQuestion,n=e.questionId,o=Object(a.useState)({title:null,questionText:null,masterAnswer:null,points:null}),i=Object(s.a)(o,2),u=i[0],d=i[1],b=(Object(c.b)(),Object(c.c)((function(e){return e.questionTable}))),f=Object(l.b)(),E=f.register,p=f.handleSubmit,h=(f.watch,f.errors,f.reset);f.getValues;Object(a.useEffect)((function(){d(null!==n?{title:b.byId[n].title,questionText:b.byId[n].text,masterAnswer:"",points:0}:function(){return{title:"",questionText:"",masterAnswer:"",points:null}}),h()}),[n]);var I=function(e){var t=e.id;e.bodyContent;R.post(U.FREE_TEXT_QUESTION,{content:{questionId:t}}).catch((function(){console.error("error make body")}))},v=function(e){var t=e.id,n={questionId:t,master:!0},a={questionId:t,answerText:e.answerContent.text};R.post(U.ANSWER,{content:n}).then((function(e){var t=e.data;R.post(U.FREE_TEXT_ANSWER,{content:Object(T.a)({answerId:t.id},a)}).catch((function(){console.error("error make answer body")}))})).catch((function(){console.error("error make answer")}))};return r.a.createElement("form",{onSubmit:p((function(e){var n={timeLimitMs:5e4,questionType:"freeText",title:e.questionTitle,text:e.questionText,points:e.questionPoints};t({questionContent:n,bodyContent:{},makeBody:I,answerContent:{text:e.masterAnswer},makeAnswer:v})}))},r.a.createElement(m.i,{ref:E,name:"questionTitle",placeholder:"Provide a Question Title here",defaultValue:u.title}),r.a.createElement(m.o,{rows:5,name:"questionText",placeholder:"Provide a question here.",ref:E,defaultValue:u.questionText}),r.a.createElement(m.o,{rows:10,name:"masterAnswer",placeholder:"Provide master Answer here",defaultValue:u.masterAnswer,ref:E}),r.a.createElement(m.i,{ref:E,name:"questionPoints",type:"number",placeholder:"Points",defaultValue:u.points}),r.a.createElement(m.b,{sx:{marginRight:"0.5rem"},variant:"warning",onClick:h},"Reset"),r.a.createElement(m.b,{type:"submit"},"Save"))}var J=n(3);function Y(e){var t=e.makeQuestion,n=e.questionId,o=Object(a.useState)({title:"",text:"",possibleAnswers:["",""],points:null}),i=Object(s.a)(o,2),u=i[0],d=i[1],b=Object(c.c)((function(e){return e.questionTable})),f=Object(c.c)((function(e){return e.questionBodyMultipleChoiceTable})),E=Object(l.b)(),p=E.register,h=E.handleSubmit,v=(E.watch,E.errors,E.control),g=E.reset;E.getValues;Object(a.useEffect)((function(){d(null!==n?{title:b.byId[n].title,text:b.byId[n].text,possibleAnswers:f.byId[n].possibleAnswers,points:null}:{title:"",text:"",possibleAnswers:["",""],points:null})}),[n]),Object(a.useEffect)((function(){g()}),[u.possibleAnswers]);var y=function(e){var t=e.id,n=e.bodyContent;R.post(U.MULTIPLE_CHOICE_QUESTION,{content:{questionId:t,possibleAnswers:n.possibleAnswers}}).catch((function(){console.error("error make body")}))},w=function(e){var t=e.id,n={questionId:t,master:!0},a={questionId:t,answers:e.answerContent.selectedAnswers};R.post(U.ANSWER,{content:n}).then((function(e){var t=e.data;R.post(U.MULTIPLE_CHOICE_ANSWER,{content:Object(T.a)({answerId:t.id},a)}).catch((function(){console.error("error make answer body")}))})).catch((function(){console.error("error make answer")}))},O=u.possibleAnswers,x=u.title,S=u.text;return r.a.createElement("form",{onSubmit:h((function(e){var n=function(e,t){var n=[];return e.map((function(e,a){t[a]&&n.push(e)})),n}(e.multipleChoiceAnswerText,e.multipleChoiceAnswer),a={timeLimitMs:5e4,questionType:"multipleChoice",title:e.questionTitle,text:e.questionText,points:e.questionPoints};t({questionContent:a,bodyContent:{possibleAnswers:e.multipleChoiceAnswerText},makeBody:y,answerContent:{selectedAnswers:n},makeAnswer:w})}))},r.a.createElement(m.f,{sx:{flexDirection:"column",alignItems:"flex-start"}},r.a.createElement(m.i,{ref:p,name:"questionTitle",placeholder:"Provide a Question Title here",defaultValue:x}),r.a.createElement(m.o,{rows:5,name:"questionText",placeholder:"Provide a question here.",ref:p,defaultValue:S}),r.a.createElement(m.b,{sx:{flexGrow:0},onClick:function(){d((function(e){return Object(T.a)({},e,{possibleAnswers:[].concat(Object(J.a)(e.possibleAnswers),[""])})}))}},"Add Answer"),O.map((function(e,t){return r.a.createElement("div",{key:Object(I.a)(),style:{marginTop:"0.5rem",alignContent:"center"}},r.a.createElement(m.f,{sx:{flexDirection:"row",alignSelf:"stretch"}},r.a.createElement(m.j,null,r.a.createElement(l.a,{sx:{marginTop:"0.5rem"},as:m.d,name:"multipleChoiceAnswer[".concat(t,"]"),control:v,defaultValue:!1}),r.a.createElement(m.i,{ref:p,name:"multipleChoiceAnswerText[".concat(t,"]"),placeholder:"Provide an Answer",defaultValue:e||null})),r.a.createElement(m.b,{sx:{margin:"0",marginLeft:"0.5rem"},variant:"warning",onClick:function(){d((function(e){return e.possibleAnswers.splice(t,1),e}))}},"x")))})),r.a.createElement(m.i,{sx:{marginTop:"0.5rem",maxWidth:"20%"},ref:p,name:"questionPoints",type:"number",placeholder:"Points",defaultValue:u.points}),r.a.createElement(m.f,null,r.a.createElement(m.b,{sx:{marginRight:"0.5rem"},variant:"warning",onClick:function(){g()}},"Reset"),r.a.createElement(m.b,{type:"submit"},"Save"))))}function G(e){var t=e.questionType,n=Object(a.useState)({questionId:null,questionType:null}),o=Object(s.a)(n,2),i=o[0],u=o[1],l=Object(a.useState)(r.a.createElement(r.a.Fragment,null)),m=Object(s.a)(l,2),b=m[0],f=m[1],E=Object(c.c)((function(e){return e.examState.currentQuestionId})),p=Object(c.c)((function(e){return e.questionTable}));Object(a.useEffect)((function(){u(E?{questionId:E,questionType:p.byId[E].questionType}:function(e){return Object(T.a)({},e,{questionType:t})})}),[E,t]),Object(a.useEffect)((function(){switch(i.questionType){case d[0].name:f(r.a.createElement(z,{makeQuestion:h,questionId:E}));break;case d[1].name:f(r.a.createElement(Y,{makeQuestion:h,questionId:E}));break;default:f(r.a.createElement("div",null,"Something went wrong"))}}),[i]);var h=function(e){var t=e.questionContent,n=e.bodyContent,a=e.makeBody,r=e.answerContent,o=e.makeAnswer;R.post(U.QUESTION,{content:t}).then((function(e){var t=e.data;a({id:t.id,bodyContent:n}),o({id:t.id,answerContent:r})})).catch((function(e){console.error("error make Question")}))};return r.a.createElement("div",null,b)}function K(){var e=Object(a.useContext)(M),t=e.allQuestions,n=e.allUsers,o=Object(a.useState)({addedUsers:[],addedQuestions:[]}),i=Object(s.a)(o,2),u=i[0],c=i[1],d=Object(l.b)(),b=d.register,f=d.handleSubmit,E=d.reset,p=d.getValues;return r.a.createElement("div",null,r.a.createElement(m.h,{as:"h2"},"Create New Exam"),r.a.createElement("form",{onSubmit:f((function(e){var t=u.addedUsers,n=u.addedQuestions,a=[],r=[];n.map((function(e){a.push(JSON.parse(e)._id)})),t.map((function(e){r.push(JSON.parse(e)._id)})),R.post(U.EXAM,{content:{name:e.examTitle,questionsById:a,examUsers:r}}).catch((function(e){return console.error(e)}))}))},r.a.createElement(m.f,{sx:{flexDirection:"column",alignItems:"flex-start",justifyContent:"stretch"}},r.a.createElement(m.i,{sx:{marginTop:"1rem"},ref:b,name:"examTitle",placeholder:"Provide a Exam Title here",defaultValue:""}),r.a.createElement(m.f,{sx:{flexDirection:"row"}},u.addedUsers.map((function(e){var t=JSON.parse(e);return r.a.createElement(m.a,{sx:{margin:"0.5rem"},key:Object(I.a)()},t.name)}))),r.a.createElement(m.f,{sx:{flexDirection:"row"}},r.a.createElement(m.l,{sx:{margin:"0.5rem"},ref:b,name:"newUser"},n.rows.map((function(e){return r.a.createElement("option",{key:Object(I.a)(),value:JSON.stringify(e)},e.name)}))),r.a.createElement(m.b,{type:"button",sx:{margin:"0.5rem"},onClick:function(){var e=p().newUser;u.addedUsers.find((function(t){return e===t}))||c((function(t){return Object(T.a)({},t,{addedUsers:[].concat(Object(J.a)(t.addedUsers),[e])})}))}},"+")),r.a.createElement(m.f,{sx:{flexDirection:"row"}},u.addedQuestions.map((function(e){var t=JSON.parse(e);return r.a.createElement(m.a,{sx:{margin:"0.5rem"},key:Object(I.a)()},t.content.title)}))),r.a.createElement(m.f,{sx:{flexDirection:"row"}},r.a.createElement(m.l,{sx:{margin:"0.5rem"},ref:b,name:"newQuestion"},t.rows.map((function(e){return r.a.createElement("option",{key:Object(I.a)(),value:JSON.stringify(e)},e.content.title)}))),r.a.createElement(m.b,{type:"button",sx:{margin:"0.5rem"},onClick:function(){var e=p().newQuestion;u.addedQuestions.find((function(t){return e===t}))||c((function(t){return Object(T.a)({},t,{addedQuestions:[].concat(Object(J.a)(t.addedQuestions),[e])})}))}},"+"))),r.a.createElement(m.b,{type:"button",variant:"warning",onClick:function(){c({addedUsers:[],addedQuestions:[]}),E()}},"reset"),r.a.createElement(m.b,{sx:{marginLeft:"0.5rem"},type:"submit"},"Save")))}function Z(){var e=Object(a.useState)("exam"),t=Object(s.a)(e,2),n=t[0];t[1];return r.a.createElement("div",null,"question"===n?r.a.createElement(H,{tabNames:d,tabComponents:function(){var e=[];return d.map((function(t){e.push(r.a.createElement(G,{questionType:t.name}))})),e}()}):r.a.createElement(K,null))}function $(){return r.a.createElement(w,{header:r.a.createElement(m.h,{as:"h1"},"XM"),sidePanel:r.a.createElement(V,null),mainContent:r.a.createElement(Z,null)})}function ee(){var e=Object(a.useContext)(B).setUser,t=Object(l.b)(),n=t.register,o=t.handleSubmit,i=Object(a.useState)(""),u=Object(s.a)(i,2),c=u[0],d=u[1];return r.a.createElement(w,{header:r.a.createElement(m.h,{as:"h1"},"XM"),mainContent:r.a.createElement("form",{onSubmit:o((function(t){console.log(t);var n=t.email,a=t.password;R.post(U.AUTH,{email:n,password:a}).then((function(t){var n=t.data;R.setAuthToken(n.token,!0),e(n)})).catch((function(e){d(e)}))}))},r.a.createElement(m.i,{ref:n,name:"email",placeholder:"Email"}),r.a.createElement(m.i,{sx:{marginTop:"0.5rem",marginBottom:"0.5rem"},placeholder:"Password",type:"password",ref:n,name:"password"}),c&&r.a.createElement(m.n,{variant:"warning"},"Something went wrong. Try again."),r.a.createElement(m.b,{type:"submit"},"Login"))})}var te=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,97))}));function ne(){var e=Object(a.useContext)(B).user,t=Object(c.c)((function(e){return e.examState.examFinished}));return r.a.createElement(u.d,null,"user"===e.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{exact:!0,path:"/"},t?r.a.createElement(u.a,{to:"/exam/done/"}):r.a.createElement(u.a,{to:"/exam/"})),r.a.createElement(u.b,{exact:!0,path:"/exam/"},t?r.a.createElement(u.a,{to:"/exam/done/"}):r.a.createElement(F,null)),r.a.createElement(u.b,{exact:!0,path:"/exam/done/"},t?r.a.createElement(w,{header:r.a.createElement(O,null),mainContent:r.a.createElement(te,null)}):r.a.createElement(u.a,{to:"/exam/"})),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/exam/"}))),"admin"===e.role&&r.a.createElement(u.b,{path:"/"},r.a.createElement($,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{path:"/login/"},r.a.createElement(ee,null)),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/login/"}))))}var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(ne,null))},re=n(30),oe=n(15),ie=n(9),ue={questionId:Object(I.a)(),questionType:"freeText",timeLimitMs:4e4,title:"That is the Question",text:"What does the Fox say?"},ce=(Object(I.a)(),Object(I.a)(),{questionId:Object(I.a)(),questionType:"freeText",timeLimitMs:5e4,title:"Even better Question",text:"How many roads must a man walk down?"}),se=(Object(I.a)(),Object(I.a)(),{questionId:Object(I.a)(),questionType:"multipleChoice",timeLimitMs:6e4,title:"Your choice",text:"Yes or No?"}),le=(Object(I.a)(),Object(I.a)(),{byId:{},allIds:[]}),de={byId:{},allIds:[]},me={byId:{},allIds:[]},be={byId:{},allIds:[]},fe={byId:{},allIds:[]},Ee={byId:{},allIds:[]},pe={byId:{},allIds:[]},he={currentExamId:null,currentQuestionIndex:null,currentQuestionId:null,currentTime:null,timerIsActive:!0,examFinished:!1};var Te=Object(oe.c)({examTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_EXAM_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));default:return e}},questionTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_QUESTION_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));default:return e}},answerTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_ANSWER_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));case"SET_ANSWER_START_TIME":return Object(ie.a)(e,(function(e){var t=e.byId[a.questionId];null===t.timeStart&&(t.timeStart=Date.now())}));case"SET_ANSWER_END_TIME":return Object(ie.a)(e,(function(e){var t=e.byId[a.questionId];t.timeEnd=Date.now(),t.timeExpired=!0}));default:return e}},questionBodyMultipleChoiceTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_QUESTION_BODY_MULTIPLE_CHOICE_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));default:return e}},questionBodyFreeTextTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_QUESTION_BODY_FREE_TEXT_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));default:return e}},answerBodyFreeTextTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_ANSWER_BODY_FREE_TEXT_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));case"ANSWER_FREE_TEXT_QUESTION":return Object(ie.a)(e,(function(e){e.byId[a.questionId].answerText=a.answer}));default:return e}},answerBodyMultipleChoiceTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_ANSWER_BODY_MULTIPLE_CHOICE_TABLE":return Object(ie.a)(e,(function(e){return a.newTable}));case"ANSWER_MULTIPLE_CHOICE_QUESTION":return Object(ie.a)(e,(function(e){e.byId[a.questionId].selectedAnswers=a.selectedAnswers}));default:return e}},examState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SET_EXAM_STATE":return Object(ie.a)(e,(function(e){return a.newTable}));case"NEXT_QUESTION":return Object(ie.a)(e,(function(e){a.currentExam.questionsById.length>e.currentQuestionIndex+1?(e.currentQuestionIndex+=1,e.currentQuestionId=a.currentExam.questionsById[e.currentQuestionIndex]):e.examFinished=!0}));case"SET_CURRENT_QUESTION_ID":return Object(ie.a)(e,(function(e){e.currentQuestionId=a.newQuestionId,e.currentQuestionIndex=a.newQuestionIndex?a.newQuestionIndex:null}));default:return e}}});var Ie=n(87),ve={breakpoints:["40em","52em","64em"],space:[0,4,8,16,32,64,128,256,512],fonts:{body:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif',heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[15,16,20,24,32,48,64,96],fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.125},colors:{text:"#000",background:"#fff",primary:"#07c",secondary:"#30c",muted:"#f6f6f6",light:" #E8F4FF",inactive:"#AFC5CB",active:"#e74c3c",warning:"#e74c3c"},text:{heading:{fontFamily:"heading",lineHeight:"heading",fontWeight:"heading"},warning:{color:"active"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",fontSize:0},h1:{variant:"text.heading",fontSize:5},h2:{variant:"text.heading",fontSize:4},h3:{variant:"text.heading",fontSize:3},h4:{variant:"text.heading",fontSize:2},h5:{variant:"text.heading",fontSize:1},h6:{variant:"text.heading",fontSize:0},pre:{fontFamily:"monospace",overflowX:"auto",code:{color:"inherit"}},code:{fontFamily:"monospace",fontSize:"inherit"},table:{width:"100%",borderCollapse:"separate",borderSpacing:0},th:{textAlign:"left",borderBottomStyle:"solid"},td:{padding:"0.5rem",textAlign:"left",borderBottomStyle:"1px solid black"},tr:{odd:{},":hover":{backgroundColor:"#ddd"}},progress:{color:"primary",height:"0.75rem"}},layout:{container:{padding:"1rem"},masterContainer:{margin:"auto",marginTop:"0.5rem",width:["100%","100%","90%"],paddingLeft:"3rem",paddingRight:"3rem"},header:{}},cards:{primary:{backgroundColor:"muted",padding:"2rem",borderRadius:4,boxShadow:"0 1px 1px 0 rgba(66, 66, 66, 0.08), 0 1px 3px 1px rgba(66, 66, 66, 0.16)"},compact:{padding:1,borderRadius:2,border:"1px solid",borderColor:"muted"},blueBorder:{padding:"1rem",border:"2px solid #07c",borderRadius:2,borderTopLeftRadius:0,borderTopRightRadius:0}},forms:{textarea:{marginTop:"0.5rem",marginBottom:"0.5rem",minWidth:"100px",minHeight:"100px",":focus":{border:"1px solid #07c",backgroundColor:"light"}}},buttons:{primary:{marginTop:"1rem",marginBottom:"1rem"},warning:{backgroundColor:"warning",marginTop:"1rem",marginBottom:"1rem"},activeTab:{borderBottomLeftRadius:0,borderBottomRightRadius:0},mutedTab:{backgroundColor:"inactive",borderBottomLeftRadius:0,borderBottomRightRadius:0},tiny:{backgroundColor:"secondary"}}},ge=n(17),ye=Object(ge.a)(),we=function(){var e=function(){try{var e=localStorage.getItem("state");if(console.log("read from state"),null===e)return;return JSON.parse(e)}catch(t){return void console.log("failed")}}();return console.log(e),Object(re.a)({reducer:Te,middleware:Object(J.a)(Object(re.b)())})}();we.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t),console.log("saved to local storage")}catch(n){console.log("Could not access local storage.")}}(we.getState())})),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:we},r.a.createElement(L,null,r.a.createElement(P,null,r.a.createElement(u.c,{history:ye},r.a.createElement(Ie.a,{theme:ve},r.a.createElement(ae,null))))))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.9177b4c1.chunk.js.map