{"ast":null,"code":"var _jsxFileName = \"/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/components/make/Question/MakeFreeText.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Textarea, Button, Input } from \"theme-ui\";\nimport HttpService from \"../../../services/http\";\nimport apiRoutes from \"../../../services/apiRoutes\";\nexport default function MakeFreeText({\n  makeQuestion,\n  questionId\n}) {\n  /**\n   * React Hooks\n   */\n  const [makeFreeTextState, setMakeFreeTextState] = useState({\n    title: null,\n    questionText: null,\n    masterAnswer: null,\n    points: null\n  });\n  /**\n   * Redux Hooks\n   */\n\n  const dispatch = useDispatch();\n  const questionTable = useSelector(state => state.questionTable);\n  /**\n   * Form Hook\n   */\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors,\n    reset,\n    getValues\n  } = useForm();\n  useEffect(() => {\n    if (questionId !== null) {\n      setMakeFreeTextState({\n        title: questionTable.byId[questionId].title,\n        questionText: questionTable.byId[questionId].text,\n        masterAnswer: \"\",\n        points: 0\n      });\n    } else {\n      setMakeFreeTextState(() => ({\n        title: \"\",\n        questionText: \"\",\n        masterAnswer: \"\",\n        points: null\n      }));\n    }\n\n    reset();\n  }, [questionId]);\n\n  const makeBody = ({\n    id,\n    bodyContent\n  }) => {\n    HttpService.post(apiRoutes.FREE_TEXT_QUESTION, {\n      content: {\n        questionId: id\n      }\n    }).catch(() => {\n      console.log(\"error make body\");\n    });\n  };\n\n  const makeAnswer = ({\n    id,\n    answerContent\n  }) => {\n    const answerData = {\n      questionId: id,\n      master: true\n    };\n    const answerBody = {\n      questionId: id,\n      answerText: answerContent.text\n    };\n    HttpService.post(apiRoutes.ANSWER, {\n      content: answerData\n    }).then(({\n      data\n    }) => {\n      HttpService.post(apiRoutes.FREE_TEXT_ANSWER, {\n        content: {\n          answerId: data.id,\n          ...answerBody\n        }\n      }).catch(() => {\n        console.log(\"error make answer body\");\n      });\n    }).catch(() => {\n      console.log(\"error make answer\");\n    });\n  };\n\n  const onSubmit = data => {\n    console.log(\"submitted\");\n    console.log(data);\n    const questionData = {\n      timeLimitMs: 50000,\n      questionType: \"freeText\",\n      title: data.questionTitle,\n      text: data.questionText,\n      points: data.questionPoints\n    };\n    makeQuestion({\n      questionContent: questionData,\n      bodyContent: {},\n      makeBody,\n      answerContent: {\n        text: data.masterAnswer\n      },\n      makeAnswer\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    ref: register,\n    name: \"questionTitle\",\n    placeholder: \"Provide a Question Title here\",\n    defaultValue: makeFreeTextState.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Textarea, {\n    rows: 5,\n    name: \"questionText\",\n    placeholder: \"Provide a question here.\",\n    ref: register,\n    defaultValue: makeFreeTextState.questionText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Textarea, {\n    rows: 10,\n    name: \"masterAnswer\",\n    placeholder: \"Provide master Answer here\",\n    defaultValue: makeFreeTextState.masterAnswer,\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    ref: register,\n    name: \"questionPoints\",\n    type: \"number\",\n    placeholder: \"Points\",\n    defaultValue: makeFreeTextState.points,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    sx: {\n      marginRight: \"0.5rem\"\n    },\n    variant: \"warning\",\n    onClick: reset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, \"Reset\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, \"Save\"));\n}","map":{"version":3,"sources":["/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/components/make/Question/MakeFreeText.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","Textarea","Button","Input","HttpService","apiRoutes","MakeFreeText","makeQuestion","questionId","makeFreeTextState","setMakeFreeTextState","title","questionText","masterAnswer","points","dispatch","questionTable","state","register","handleSubmit","watch","errors","reset","getValues","useForm","byId","text","makeBody","id","bodyContent","post","FREE_TEXT_QUESTION","content","catch","console","log","makeAnswer","answerContent","answerData","master","answerBody","answerText","ANSWER","then","data","FREE_TEXT_ANSWER","answerId","onSubmit","questionData","timeLimitMs","questionType","questionTitle","questionPoints","questionContent","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { Textarea, Button, Input, Grid } from \"theme-ui\";\nimport { TRootState } from \"../../../types/examTypes\";\nimport HttpService from \"../../../services/http\";\nimport apiRoutes from \"../../../services/apiRoutes\";\n\nexport default function MakeFreeText({ makeQuestion, questionId }) {\n  /**\n   * React Hooks\n   */\n  const [makeFreeTextState, setMakeFreeTextState] = useState({\n    title: null,\n    questionText: null,\n    masterAnswer: null,\n    points: null,\n  });\n\n  /**\n   * Redux Hooks\n   */\n\n  const dispatch = useDispatch();\n  const questionTable = useSelector((state: TRootState) => state.questionTable);\n  /**\n   * Form Hook\n   */\n  const { register, handleSubmit, watch, errors, reset, getValues } = useForm();\n\n  useEffect(() => {\n    if (questionId !== null) {\n      setMakeFreeTextState({\n        title: questionTable.byId[questionId].title,\n        questionText: questionTable.byId[questionId].text,\n        masterAnswer: \"\",\n        points: 0,\n      });\n    } else {\n      setMakeFreeTextState(() => ({\n        title: \"\",\n        questionText: \"\",\n        masterAnswer: \"\",\n        points: null,\n      }));\n    }\n    reset();\n  }, [questionId]);\n\n  const makeBody = ({ id, bodyContent }) => {\n    HttpService.post(apiRoutes.FREE_TEXT_QUESTION, {\n      content: { questionId: id },\n    }).catch(() => {\n      console.log(\"error make body\");\n    });\n  };\n\n  const makeAnswer = ({ id, answerContent }) => {\n    const answerData = { questionId: id, master: true };\n    const answerBody = { questionId: id, answerText: answerContent.text };\n    HttpService.post(apiRoutes.ANSWER, { content: answerData })\n      .then(({ data }) => {\n        HttpService.post(apiRoutes.FREE_TEXT_ANSWER, {\n          content: {\n            answerId: data.id,\n            ...answerBody,\n          },\n        }).catch(() => {\n          console.log(\"error make answer body\");\n        });\n      })\n      .catch(() => {\n        console.log(\"error make answer\");\n      });\n  };\n\n  const onSubmit = (data) => {\n    console.log(\"submitted\");\n    console.log(data);\n    const questionData = {\n      timeLimitMs: 50000,\n      questionType: \"freeText\",\n      title: data.questionTitle,\n      text: data.questionText,\n      points: data.questionPoints,\n    };\n    makeQuestion({\n      questionContent: questionData,\n      bodyContent: {},\n      makeBody,\n      answerContent: { text: data.masterAnswer },\n      makeAnswer,\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <Input\n        ref={register}\n        name={\"questionTitle\"}\n        placeholder=\"Provide a Question Title here\"\n        defaultValue={makeFreeTextState.title}\n      />\n      <Textarea\n        rows={5}\n        name={\"questionText\"}\n        placeholder={\"Provide a question here.\"}\n        ref={register}\n        defaultValue={makeFreeTextState.questionText}\n      />\n      <Textarea\n        rows={10}\n        name={\"masterAnswer\"}\n        placeholder={\"Provide master Answer here\"}\n        defaultValue={makeFreeTextState.masterAnswer}\n        ref={register}\n      />\n      <Input\n        ref={register}\n        name={\"questionPoints\"}\n        type=\"number\"\n        placeholder=\"Points\"\n        defaultValue={makeFreeTextState.points}\n      />\n      <Button sx={{ marginRight: \"0.5rem\" }} variant=\"warning\" onClick={reset}>\n        Reset\n      </Button>\n      <Button type=\"submit\">Save</Button>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}