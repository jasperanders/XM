{"ast":null,"code":"var _jsxFileName = \"/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/components/takeQuestion/questionType/MultipleChoice.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Label, Checkbox, Button } from \"theme-ui\";\nimport { v4 } from \"uuid\";\nimport { nextQuestion, answerMultipleChoiceQuestion, setAnswerEndTime } from \"../../../redux/actions\";\nimport { multipleChoiceFormName } from \"../../../constants/constants\";\nexport default function MultipleChoiceQuestion({\n  register,\n  handleSubmit,\n  question,\n  getValues,\n  setCurrentAnswerAction\n}) {\n  /**\n   * Redux hooks\n   */\n  const dispatch = useDispatch();\n  const [questionState, setQuestionState] = useState({\n    possibleAnswers: []\n  });\n  const questionBodyTable = useSelector(state => state.questionBodyMultipleChoiceTable);\n  const currentExam = useSelector(state => state.examTable);\n  const {\n    currentExamId,\n    currentQuestionId\n  } = useSelector(state => state.examState);\n  /**\n   * miscellaneous functions\n   */\n\n  const makeSelectedAnswers = data => {\n    const {\n      multipleChoice\n    } = data;\n    let selectedAnswers = [];\n    questionState.possibleAnswers.forEach((el, i) => {\n      if (data.multipleChoice[i]) {\n        selectedAnswers.push(el);\n      }\n    });\n    return selectedAnswers;\n  };\n  /**\n   * Effect Hooks\n   */\n\n\n  useEffect(() => {\n    setCurrentAnswerAction(() => {\n      return () => {\n        // {nested: true} returns values as if they were submitted\n        const selectedAnswers = makeSelectedAnswers(getValues({\n          nest: true\n        }));\n        return answerMultipleChoiceQuestion({\n          questionId: question.questionId,\n          selectedAnswers\n        });\n      };\n    });\n    setQuestionState(old => {\n      return { ...old,\n        possibleAnswers: questionBodyTable.byId[question.questionId]\n      };\n    });\n  }, [question]);\n  /**\n   * Destructuring\n   */\n\n  const onSubmit = data => {\n    const selectedAnswers = makeSelectedAnswers(data);\n    dispatch(answerMultipleChoiceQuestion({\n      questionId: question.questionId,\n      selectedAnswers\n    }));\n    dispatch(setAnswerEndTime({\n      questionId: question.questionId\n    }));\n    dispatch(nextQuestion({\n      currentExam: currentExam.byId[currentExamId]\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, questionState.possibleAnswers.map((possibleAnswer, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: v4(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      defaultChecked: false,\n      name: `${multipleChoiceFormName}[${index}]`,\n      ref: register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }), possibleAnswer));\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Save and Next Question\"));\n}","map":{"version":3,"sources":["/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/components/takeQuestion/questionType/MultipleChoice.tsx"],"names":["React","useState","useEffect","useDispatch","useSelector","Label","Checkbox","Button","v4","nextQuestion","answerMultipleChoiceQuestion","setAnswerEndTime","multipleChoiceFormName","MultipleChoiceQuestion","register","handleSubmit","question","getValues","setCurrentAnswerAction","dispatch","questionState","setQuestionState","possibleAnswers","questionBodyTable","state","questionBodyMultipleChoiceTable","currentExam","examTable","currentExamId","currentQuestionId","examState","makeSelectedAnswers","data","multipleChoice","selectedAnswers","forEach","el","i","push","nest","questionId","old","byId","onSubmit","map","possibleAnswer","index"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,KAAT,EAAgBC,QAAhB,EAA0BC,MAA1B,QAAwC,UAAxC;AAEA,SAASC,EAAT,QAAmB,MAAnB;AACA,SACEC,YADF,EAEEC,4BAFF,EAGEC,gBAHF,QAIO,wBAJP;AAKA,SAASC,sBAAT,QAAuC,8BAAvC;AAEA,eAAe,SAASC,sBAAT,CAAgC;AAC7CC,EAAAA,QAD6C;AAE7CC,EAAAA,YAF6C;AAG7CC,EAAAA,QAH6C;AAI7CC,EAAAA,SAJ6C;AAK7CC,EAAAA;AAL6C,CAAhC,EAMZ;AACD;;;AAGA,QAAMC,QAAQ,GAAGhB,WAAW,EAA5B;AACA,QAAM,CAACiB,aAAD,EAAgBC,gBAAhB,IAAoCpB,QAAQ,CAAC;AACjDqB,IAAAA,eAAe,EAAE;AADgC,GAAD,CAAlD;AAIA,QAAMC,iBAAiB,GAAGnB,WAAW,CAClCoB,KAAD,IAAuBA,KAAK,CAACC,+BADM,CAArC;AAIA,QAAMC,WAAW,GAAGtB,WAAW,CAAEoB,KAAD,IAAuBA,KAAK,CAACG,SAA9B,CAA/B;AAEA,QAAM;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAAuCzB,WAAW,CACrDoB,KAAD,IAAuBA,KAAK,CAACM,SADyB,CAAxD;AAIA;;;;AAIA,QAAMC,mBAAmB,GAAIC,IAAD,IAAU;AACpC,UAAM;AAAEC,MAAAA;AAAF,QAAqBD,IAA3B;AACA,QAAIE,eAAe,GAAG,EAAtB;AACAd,IAAAA,aAAa,CAACE,eAAd,CAA8Ba,OAA9B,CAAsC,CAACC,EAAD,EAAKC,CAAL,KAAW;AAC/C,UAAIL,IAAI,CAACC,cAAL,CAAoBI,CAApB,CAAJ,EAA4B;AAC1BH,QAAAA,eAAe,CAACI,IAAhB,CAAqBF,EAArB;AACD;AACF,KAJD;AAKA,WAAOF,eAAP;AACD,GATD;AAWA;;;;;AAIAhC,EAAAA,SAAS,CAAC,MAAM;AACdgB,IAAAA,sBAAsB,CAAC,MAAM;AAC3B,aAAO,MAAM;AACX;AACA,cAAMgB,eAAe,GAAGH,mBAAmB,CAACd,SAAS,CAAC;AAAEsB,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAV,CAA3C;AACA,eAAO7B,4BAA4B,CAAC;AAClC8B,UAAAA,UAAU,EAAExB,QAAQ,CAACwB,UADa;AAElCN,UAAAA;AAFkC,SAAD,CAAnC;AAID,OAPD;AAQD,KATqB,CAAtB;AAUAb,IAAAA,gBAAgB,CAAEoB,GAAD,IAAS;AACxB,aAAQ,EACN,GAAGA,GADG;AAENnB,QAAAA,eAAe,EAAEC,iBAAiB,CAACmB,IAAlB,CAAuB1B,QAAQ,CAACwB,UAAhC;AAFX,OAAR;AAID,KALe,CAAhB;AAMD,GAjBQ,EAiBN,CAACxB,QAAD,CAjBM,CAAT;AAmBA;;;;AAGA,QAAM2B,QAAQ,GAAIX,IAAD,IAAU;AACzB,UAAME,eAAe,GAAGH,mBAAmB,CAACC,IAAD,CAA3C;AACAb,IAAAA,QAAQ,CACNT,4BAA4B,CAAC;AAC3B8B,MAAAA,UAAU,EAAExB,QAAQ,CAACwB,UADM;AAE3BN,MAAAA;AAF2B,KAAD,CADtB,CAAR;AAMAf,IAAAA,QAAQ,CAACR,gBAAgB,CAAC;AAAE6B,MAAAA,UAAU,EAAExB,QAAQ,CAACwB;AAAvB,KAAD,CAAjB,CAAR;AACArB,IAAAA,QAAQ,CAACV,YAAY,CAAC;AAAEiB,MAAAA,WAAW,EAAEA,WAAW,CAACgB,IAAZ,CAAiBd,aAAjB;AAAf,KAAD,CAAb,CAAR;AACD,GAVD;;AAWA,sBACE;AAAM,IAAA,QAAQ,EAAEb,YAAY,CAAC4B,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGvB,aAAa,CAACE,eAAd,CAA8BsB,GAA9B,CAAkC,CAACC,cAAD,EAAiBC,KAAjB,KAA2B;AAC5D,wBACE;AAAK,MAAA,GAAG,EAAEtC,EAAE,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,QAAD;AACE,MAAA,cAAc,EAAE,KADlB;AAEE,MAAA,IAAI,EAAG,GAAEI,sBAAuB,IAAGkC,KAAM,GAF3C;AAGE,MAAA,GAAG,EAAEhC,QAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAOG+B,cAPH,CADF,CADF;AAaD,GAdA,CADH,eAgBE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAhBF,CADF;AAoBD","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Label, Checkbox, Button } from \"theme-ui\";\nimport { TRootState } from \"../../../types/examTypes\";\nimport { v4 } from \"uuid\";\nimport {\n  nextQuestion,\n  answerMultipleChoiceQuestion,\n  setAnswerEndTime,\n} from \"../../../redux/actions\";\nimport { multipleChoiceFormName } from \"../../../constants/constants\";\n\nexport default function MultipleChoiceQuestion({\n  register,\n  handleSubmit,\n  question,\n  getValues,\n  setCurrentAnswerAction,\n}) {\n  /**\n   * Redux hooks\n   */\n  const dispatch = useDispatch();\n  const [questionState, setQuestionState] = useState({\n    possibleAnswers: [],\n  });\n\n  const questionBodyTable = useSelector(\n    (state: TRootState) => state.questionBodyMultipleChoiceTable\n  );\n\n  const currentExam = useSelector((state: TRootState) => state.examTable);\n\n  const { currentExamId, currentQuestionId } = useSelector(\n    (state: TRootState) => state.examState\n  );\n\n  /**\n   * miscellaneous functions\n   */\n\n  const makeSelectedAnswers = (data) => {\n    const { multipleChoice } = data;\n    let selectedAnswers = [];\n    questionState.possibleAnswers.forEach((el, i) => {\n      if (data.multipleChoice[i]) {\n        selectedAnswers.push(el);\n      }\n    });\n    return selectedAnswers;\n  };\n\n  /**\n   * Effect Hooks\n   */\n\n  useEffect(() => {\n    setCurrentAnswerAction(() => {\n      return () => {\n        // {nested: true} returns values as if they were submitted\n        const selectedAnswers = makeSelectedAnswers(getValues({ nest: true }));\n        return answerMultipleChoiceQuestion({\n          questionId: question.questionId,\n          selectedAnswers,\n        });\n      };\n    });\n    setQuestionState((old) => {\n      return  {\n        ...old,\n        possibleAnswers: questionBodyTable.byId[question.questionId],\n      };\n    });\n  }, [question]);\n\n  /**\n   * Destructuring\n   */\n  const onSubmit = (data) => {\n    const selectedAnswers = makeSelectedAnswers(data);\n    dispatch(\n      answerMultipleChoiceQuestion({\n        questionId: question.questionId,\n        selectedAnswers,\n      })\n    );\n    dispatch(setAnswerEndTime({ questionId: question.questionId }));\n    dispatch(nextQuestion({ currentExam: currentExam.byId[currentExamId] }));\n  };\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      {questionState.possibleAnswers.map((possibleAnswer, index) => {\n        return (\n          <div key={v4()}>\n            <Label>\n              {/* <Controller as={Checkbox} name={multipleChoiceFormName} /> */}\n              <Checkbox\n                defaultChecked={false}\n                name={`${multipleChoiceFormName}[${index}]`}\n                ref={register}\n              />\n              {possibleAnswer}\n            </Label>\n          </div>\n        );\n      })}\n      <Button type=\"submit\">Save and Next Question</Button>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}