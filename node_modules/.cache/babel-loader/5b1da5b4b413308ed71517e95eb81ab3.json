{"ast":null,"code":"import _slicedToArray from\"/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{Input,Button,Heading,Text}from\"theme-ui\";import{useForm}from\"react-hook-form\";import Layout from\"../components/layout/Layout\";import HttpService from\"../services/http\";import apiRoutes from\"../services/apiRoutes\";import{UserContext}from\"../services/userContext\";export default function Login(){var _useContext=useContext(UserContext),setUser=_useContext.setUser;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),formError=_useState2[0],setFormError=_useState2[1];var onSubmit=function onSubmit(data){console.log(data);var email=data.email,password=data.password;HttpService.post(apiRoutes.AUTH,{email:email,password:password}).then(function(_ref){var data=_ref.data;HttpService.setAuthToken(data.token,true);setUser(data);}).catch(function(error){setFormError(error);});};return/*#__PURE__*/React.createElement(Layout,{header:/*#__PURE__*/React.createElement(Heading,{as:\"h1\"},\"XM\"),mainContent:/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(Input,{ref:register,name:\"email\",placeholder:\"Email\"}),/*#__PURE__*/React.createElement(Input,{sx:{marginTop:\"0.5rem\",marginBottom:\"0.5rem\"},placeholder:\"Password\",type:\"password\",ref:register,name:\"password\"}),formError&&/*#__PURE__*/React.createElement(Text,{variant:\"warning\"},\"Something went wrong. Try again.\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\"},\"Login\"))});}","map":{"version":3,"sources":["/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/routes/login.tsx"],"names":["React","useState","useContext","Input","Button","Heading","Text","useForm","Layout","HttpService","apiRoutes","UserContext","Login","setUser","register","handleSubmit","formError","setFormError","onSubmit","data","console","log","email","password","post","AUTH","then","setAuthToken","token","catch","error","marginTop","marginBottom"],"mappings":"wIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,OAAxB,CAAiCC,IAAjC,KAA6C,UAA7C,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,6BAAnB,CACA,MAAOC,CAAAA,WAAP,KAAwB,kBAAxB,CACA,MAAOC,CAAAA,SAAP,KAAsB,uBAAtB,CACA,OAASC,WAAT,KAA4B,yBAA5B,CAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,iBACVV,UAAU,CAACS,WAAD,CADA,CACtBE,OADsB,aACtBA,OADsB,cAEKN,OAAO,EAFZ,CAEtBO,QAFsB,UAEtBA,QAFsB,CAEZC,YAFY,UAEZA,YAFY,eAGId,QAAQ,CAAC,EAAD,CAHZ,wCAGvBe,SAHuB,eAGZC,YAHY,eAK9B,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAU,CACzBC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EADyB,GAEjBG,CAAAA,KAFiB,CAEGH,IAFH,CAEjBG,KAFiB,CAEVC,QAFU,CAEGJ,IAFH,CAEVI,QAFU,CAGzBd,WAAW,CAACe,IAAZ,CAAiBd,SAAS,CAACe,IAA3B,CAAiC,CAAEH,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAjC,EACGG,IADH,CACQ,cAAc,IAAXP,CAAAA,IAAW,MAAXA,IAAW,CAClBV,WAAW,CAACkB,YAAZ,CAAyBR,IAAI,CAACS,KAA9B,CAAqC,IAArC,EACAf,OAAO,CAACM,IAAD,CAAP,CACD,CAJH,EAKGU,KALH,CAKS,SAACC,KAAD,CAAW,CAChBb,YAAY,CAACa,KAAD,CAAZ,CACD,CAPH,EAQD,CAXD,CAaA,mBACE,oBAAC,MAAD,EACE,MAAM,cAAE,oBAAC,OAAD,EAAS,EAAE,CAAC,IAAZ,OADV,CAEE,WAAW,cACT,4BAAM,QAAQ,CAAEf,YAAY,CAACG,QAAD,CAA5B,eACE,oBAAC,KAAD,EAAO,GAAG,CAAEJ,QAAZ,CAAsB,IAAI,CAAE,OAA5B,CAAqC,WAAW,CAAC,OAAjD,EADF,cAEE,oBAAC,KAAD,EACE,EAAE,CAAE,CAAEiB,SAAS,CAAE,QAAb,CAAuBC,YAAY,CAAE,QAArC,CADN,CAEE,WAAW,CAAC,UAFd,CAGE,IAAI,CAAC,UAHP,CAIE,GAAG,CAAElB,QAJP,CAKE,IAAI,CAAE,UALR,EAFF,CASGE,SAAS,eACR,oBAAC,IAAD,EAAM,OAAO,CAAC,SAAd,qCAVJ,cAYE,oBAAC,MAAD,EAAQ,IAAI,CAAE,QAAd,UAZF,CAHJ,EADF,CAqBD","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Input, Button, Heading, Text } from \"theme-ui\";\nimport { useForm } from \"react-hook-form\";\nimport Layout from \"../components/layout/Layout\";\nimport HttpService from \"../services/http\";\nimport apiRoutes from \"../services/apiRoutes\";\nimport { UserContext } from \"../services/userContext\";\n\nexport default function Login() {\n  const { setUser } = useContext(UserContext);\n  const { register, handleSubmit } = useForm();\n  const [formError, setFormError] = useState(\"\");\n\n  const onSubmit = (data) => {\n    console.log(data);\n    const { email, password } = data;\n    HttpService.post(apiRoutes.AUTH, { email, password })\n      .then(({ data }) => {\n        HttpService.setAuthToken(data.token, true);\n        setUser(data);\n      })\n      .catch((error) => {\n        setFormError(error);\n      });\n  };\n\n  return (\n    <Layout\n      header={<Heading as=\"h1\">XM</Heading>}\n      mainContent={\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <Input ref={register} name={\"email\"} placeholder=\"Email\" />\n          <Input\n            sx={{ marginTop: \"0.5rem\", marginBottom: \"0.5rem\" }}\n            placeholder=\"Password\"\n            type=\"password\"\n            ref={register}\n            name={\"password\"}\n          />\n          {formError && (\n            <Text variant=\"warning\">Something went wrong. Try again.</Text>\n          )}\n          <Button type={\"submit\"}>Login</Button>\n        </form>\n      }\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}