{"ast":null,"code":"var _jsxFileName = \"/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/routes/login.tsx\";\nimport React, { useState, useContext } from \"react\";\nimport { Input, Button, Heading, Text } from \"theme-ui\";\nimport { useForm } from \"react-hook-form\";\nimport Layout from \"../components/layout/Layout\";\nimport HttpService from \"../services/http\";\nimport apiRoutes from \"../services/apiRoutes\";\nimport { UserContext } from \"../services/userContext\";\nexport default function Login() {\n  const {\n    loadUser\n  } = useContext(UserContext);\n  const {\n    register,\n    handleSubmit,\n    reset\n  } = useForm();\n  const [formError, setFormError] = useState(\"\");\n\n  const onSubmit = data => {\n    console.log(data);\n    const {\n      email,\n      password\n    } = data;\n    HttpService.post(apiRoutes.AUTH, {\n      email,\n      password\n    }, par).then(({\n      data\n    }) => {\n      HttpService.setAuthToken(data.token, true);\n      loadUser();\n    }).catch(error => {\n      setFormError(error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    header: /*#__PURE__*/React.createElement(Heading, {\n      as: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 15\n      }\n    }, \"XM\"),\n    mainContent: /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      ref: register,\n      name: \"email\",\n      placeholder: \"Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Input, {\n      sx: {\n        marginTop: \"0.5rem\",\n        marginBottom: \"0.5rem\"\n      },\n      placeholder: \"Password\",\n      type: \"password\",\n      ref: register,\n      name: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 11\n      }\n    }), formError && /*#__PURE__*/React.createElement(Text, {\n      variant: \"warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, \"Something went wrong. Try again.\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }\n    }, \"Login\")),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  });\n}","map":{"version":3,"sources":["/home/jasper/Documents/Uni/BachelorArbeit/XM/frontend/src/routes/login.tsx"],"names":["React","useState","useContext","Input","Button","Heading","Text","useForm","Layout","HttpService","apiRoutes","UserContext","Login","loadUser","register","handleSubmit","reset","formError","setFormError","onSubmit","data","console","log","email","password","post","AUTH","par","then","setAuthToken","token","catch","error","marginTop","marginBottom"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,QAA4C,OAA5C;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,OAAxB,EAAiCC,IAAjC,QAA6C,UAA7C;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AAEA,eAAe,SAASC,KAAT,GAAiB;AAC9B,QAAM;AAAEC,IAAAA;AAAF,MAAeX,UAAU,CAACS,WAAD,CAA/B;AACA,QAAM;AAAEG,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA;AAA1B,MAAoCT,OAAO,EAAjD;AACA,QAAM,CAACU,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMkB,QAAQ,GAAIC,IAAD,IAAU;AACzBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,UAAM;AAAEG,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAsBJ,IAA5B;AACAX,IAAAA,WAAW,CAACgB,IAAZ,CAAiBf,SAAS,CAACgB,IAA3B,EAAiC;AAAEH,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAjC,EAAsDG,GAAtD,EACGC,IADH,CACQ,CAAC;AAAER,MAAAA;AAAF,KAAD,KAAc;AAClBX,MAAAA,WAAW,CAACoB,YAAZ,CAAyBT,IAAI,CAACU,KAA9B,EAAqC,IAArC;AACAjB,MAAAA,QAAQ;AACT,KAJH,EAKGkB,KALH,CAKUC,KAAD,IAAW;AAChBd,MAAAA,YAAY,CAACc,KAAD,CAAZ;AACD,KAPH;AAQD,GAXD;;AAaA,sBACE,oBAAC,MAAD;AACE,IAAA,MAAM,eAAE,oBAAC,OAAD;AAAS,MAAA,EAAE,EAAC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADV;AAEE,IAAA,WAAW,eACT;AAAM,MAAA,QAAQ,EAAEjB,YAAY,CAACI,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAO,MAAA,GAAG,EAAEL,QAAZ;AAAsB,MAAA,IAAI,EAAE,OAA5B;AAAqC,MAAA,WAAW,EAAC,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE,oBAAC,KAAD;AACE,MAAA,EAAE,EAAE;AAAEmB,QAAAA,SAAS,EAAE,QAAb;AAAuBC,QAAAA,YAAY,EAAE;AAArC,OADN;AAEE,MAAA,WAAW,EAAC,UAFd;AAGE,MAAA,IAAI,EAAC,UAHP;AAIE,MAAA,GAAG,EAAEpB,QAJP;AAKE,MAAA,IAAI,EAAE,UALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EASGG,SAAS,iBACR,oBAAC,IAAD;AAAM,MAAA,OAAO,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAVJ,eAYE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAE,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAZF,CAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAqBD","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Input, Button, Heading, Text } from \"theme-ui\";\nimport { useForm } from \"react-hook-form\";\nimport Layout from \"../components/layout/Layout\";\nimport HttpService from \"../services/http\";\nimport apiRoutes from \"../services/apiRoutes\";\nimport { UserContext } from \"../services/userContext\";\n\nexport default function Login() {\n  const { loadUser } = useContext(UserContext);\n  const { register, handleSubmit, reset } = useForm();\n  const [formError, setFormError] = useState(\"\");\n\n  const onSubmit = (data) => {\n    console.log(data);\n    const { email, password } = data;\n    HttpService.post(apiRoutes.AUTH, { email, password }, par)\n      .then(({ data }) => {\n        HttpService.setAuthToken(data.token, true);\n        loadUser();\n      })\n      .catch((error) => {\n        setFormError(error);\n      });\n  };\n\n  return (\n    <Layout\n      header={<Heading as=\"h1\">XM</Heading>}\n      mainContent={\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <Input ref={register} name={\"email\"} placeholder=\"Email\" />\n          <Input\n            sx={{ marginTop: \"0.5rem\", marginBottom: \"0.5rem\" }}\n            placeholder=\"Password\"\n            type=\"password\"\n            ref={register}\n            name={\"password\"}\n          />\n          {formError && (\n            <Text variant=\"warning\">Something went wrong. Try again.</Text>\n          )}\n          <Button type={\"submit\"}>Login</Button>\n        </form>\n      }\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}